<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
    />
    <title>Pathfinding</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      defer
      src="https://unpkg.com/alpinejs@3.10.5/dist/cdn.min.js"
    ></script>
    <script>
      var _paq = (window._paq = window._paq || []);
      /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
      _paq.push(["trackPageView"]);
      _paq.push(["enableLinkTracking"]);
      (function () {
        var u = "//stats.marcoplain.com/";
        _paq.push(["setTrackerUrl", u + "matomo.php"]);
        _paq.push(["setSiteId", "2"]);
        var d = document,
          g = d.createElement("script"),
          s = d.getElementsByTagName("script")[0];
        g.async = true;
        g.src = u + "matomo.js";
        s.parentNode.insertBefore(g, s);
      })();
    </script>
  </head>
  <body class="overflow-x-hidden bg-gray-50">
    <div class="bg-gray-100 text-gray-700 py-2 lg:py-16">
      <div class="container mx-auto">
        <div class="p-8 text-center">
          <h1 class="text-teal-500 text-4xl">pathfinding-fx.js</h1>
          <p>
            A visualization library experiment for interactive website effects
            based on pathfinding algorithms
          </p>
        </div>
      </div>

      <div class="container max-w-8xl mx-auto my-2 flex flex-col gap-4">
        <div class="flex flex-col lg:flex-row gap-4">
          <div class="flex-none w-full mx-auto" style="max-width: 500px">
            <div id="demo-examples" style="max-width: 500px"></div>
            <a
              target="_blank"
              href="https://github.com/MarcoPlain/pathfinding-fx.js/blob/main/docs/examples.js"
              class="text-gray-500 text-sm items-center gap-2 justify-center my-4 hidden lg:flex hover:text-gray-900"
              ><svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="w-4 h-4 inline"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 16.5"
                />
              </svg>
              <span>See examples on GitHub</span>
            </a>
          </div>
          <div class="flex-grow flex flex-col gap-4">
            <div
              class="flex flex-none flex-wrap justify-center lg:justify-start gap-2 items-center text-sm"
            >
              <a
                onclick="loadExamplePathfinding()"
                data-demo="ExamplePathfinding"
                class="text-white bg-teal-500 px-3 py-2 rounded-lg cursor-pointer whitespace-nowrap"
              >
                Pathfinding
              </a>
              <a
                onclick="loadExampleDataFlow()"
                data-demo="ExampleDataFlow"
                class="text-white bg-teal-900 px-3 py-2 rounded-lg cursor-pointer whitespace-nowrap"
              >
                Data Flow
              </a>
              <a
                onclick="loadExampleMazeRunners()"
                data-demo="ExampleMazeRunners"
                class="text-white bg-teal-900 px-3 py-2 rounded-lg cursor-pointer whitespace-nowrap"
              >
                Maze Runners
              </a>
              <a
                onclick="loadExampleFlooding()"
                data-demo="ExampleFlooding"
                class="text-white bg-teal-900 px-3 py-2 rounded-lg cursor-pointer whitespace-nowrap"
              >
                Flooding
              </a>
              <a
                onclick="loadExampleMountainClimber()"
                data-demo="ExampleMountainClimber"
                class="text-white bg-teal-900 px-3 py-2 rounded-lg cursor-pointer whitespace-nowrap"
              >
                Mountain Climber
              </a>
              <a
                onclick="loadExampleLightSource()"
                data-demo="ExampleLightSource"
                class="text-white bg-teal-900 px-3 py-2 rounded-lg cursor-pointer whitespace-nowrap"
              >
                Lightbulb
              </a>
            </div>
            <div
              class="flex-1 flex flex-col gap-2 justify-between py-4 lg:py-12 px-4 lg:px-0"
            >
              <div class="flex flex-col gap-4">
                <h2 id="example-title" class="text-3xl font-serif"></h2>
                <p
                  id="example-description"
                  class="text-lg font-sans max-w-[500px] inline-block text-justify"
                ></p>
              </div>

              <div>
                <p id="example-instructions" class="text-md font-mono"></p>

                <a
                  target="_blank"
                  href="https://github.com/MarcoPlain/pathfinding-fx.js/blob/main/docs/examples.js"
                  class="text-gray-500 text-sm items-center gap-2 my-4 flex lg:hidden hover:text-gray-900"
                  ><svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="w-4 h-4 inline"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 16.5"
                    />
                  </svg>
                  <span>See code on Github</span>
                </a>
                <div
                  class="flex flex-col lg:flex-row items-center text-center gap-2 lg:gap-8 pt-2 lg:pt-0 mt-4 border-t border-gray-300 lg:border-none"
                >
                  <div>
                    <a
                      href="https://unpkg.com/pathfinding-fx.js@latest/dist/pathfinding-fx.js"
                      class="text-white bg-teal-900 hover:bg-teal-500 lg:text-xl uppercase px-4 py-3 my-1 inline-block rounded-lg transition duration-300"
                      >Download</a
                    >
                    <p class="text-xs text-gray-500">
                      Right click
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke-width="1.5"
                        stroke="currentColor"
                        class="w-4 h-4 inline"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          d="M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"
                        />
                      </svg>
                      Save as
                    </p>
                  </div>
                  <div>
                    <p class="mt-2 text-gray-700">Also available on npm:</p>
                    <p>
                      <code
                        class="bg-gray-900 text-gray-50 px-2 py-1 inline-block rounded-lg"
                        >npm i pathfinding-fx.js</code
                      >
                    </p>
                  </div>
                  <div>
                    <iframe
                      src="https://ghbtns.com/github-btn.html?user=MarcoPlain&repo=pathfinding-fx.js&type=star&size=large&text=false"
                      frameborder="0"
                      scrolling="0"
                      width="40"
                      height="30"
                      title="GitHub"
                    ></iframe>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="flex flex-col gap-0 divide-y-2 container max-w-6xl mx-auto">
      <!-- PFX :: initialization() -->
      <div
        class="grid grid-cols-1 lg:grid-cols-3 lg:divide-x-2 gap-4 p-4 py-8"
        x-data="initialization()"
      >
        <div class="lg:w-[300px] justify-center flex flex-col gap-4">
          <h1 class="text-xl font-serif">PFX :: Initialization</h1>
          <p class="text-justify">
            Initialize PathfindingFX by instantiating a new PathfindingFX Object
            and pass in the element where the canvas should be drawn into.
          </p>
          <p class="text-justify">
            As a second parameter pass the map with a two-dimensional array
            giving information about what is a wall and what not.
          </p>
        </div>
        <div class="flex items-center justify-center">
          <div>
            <div id="init" style="max-width: 225px"></div>
            <script>
              const initialization = () => ({
                map: [
                  [0, 0, 0, 0, 0, 0, 0, 0, 0],
                  [0, 1, 1, 1, 1, 1, 1, 1, 0],
                  [0, 1, 1, 1, 1, 1, 1, 1, 0],
                  [0, 1, 1, 1, 0, 1, 1, 1, 0],
                  [0, 1, 1, 1, 0, 1, 1, 1, 0],
                  [0, 1, 1, 1, 0, 1, 1, 1, 0],
                  [0, 1, 1, 1, 1, 1, 1, 1, 0],
                  [0, 1, 1, 1, 1, 1, 1, 1, 0],
                  [0, 0, 0, 0, 0, 0, 0, 0, 0],
                ],
                run() {
                  const PFX = new PathfindingFX(
                    document.getElementById("init"),
                    this.map
                  );

                  //PFX.drawMap();
                  PFX.onUpdateMap = (map) => {
                    this.map = map;
                  };
                },
                init() {
                  this.run();
                },
              });
            </script>
          </div>
        </div>
        <div class="text-center lg:text-left lg:pl-4">
          <a
            onclick="this.nextElementSibling.classList.toggle('hidden')"
            class="text-white bg-teal-900 px-3 py-2 rounded-lg cursor-pointer whitespace-nowrap lg:hidden"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-5 h-5 inline"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 16.5"
              />
            </svg>
            Toggle code
          </a>

          <div class="hidden lg:block text-left">
            <pre
              class="bg-gray-100 p-2 rounded"
            ><code class="text-xs text-gray-800">const PFX = new PathfindingFX(
  document.getElementById("pfx-init"),
  [
    <span x-html='"["+map.join("],\n    [")+"]"'></span>
  ], 
);</code></pre>
          </div>
        </div>
      </div>

      <!-- PFX :: adding_nodes() -->
      <div
        class="grid grid-cols-1 lg:grid-cols-3 lg:divide-x-2 gap-4 p-4 py-8"
        x-data="adding_nodes()"
      >
        <div class="lg:w-[300px] justify-center flex flex-col gap-4">
          <h1 class="text-xl font-serif">PFX :: Adding nodes</h1>
          <p class="text-justify">
            Adds nodes to the canvas. The addNode method accepts an object of
            settings. The most important one is the <i>"pos"</i> property which
            includes a x and y position based on the current map (starting from
            zero in the top left corner).
          </p>
          <p class="text-justify">
            There are more settings, for example the style property defining the
            shape and color of the node.
          </p>
        </div>
        <div class="flex items-center justify-center">
          <div>
            <div id="adding_nodes" style="max-width: 225px"></div>
            <script>
              const adding_nodes = () => ({
                map: [
                  [0, 0, 0, 0, 0, 0, 0, 0, 0],
                  [0, 1, 1, 1, 0, 1, 1, 1, 0],
                  [0, 1, 1, 1, 0, 1, 1, 1, 0],
                  [0, 1, 1, 1, 0, 1, 1, 1, 0],
                  [0, 1, 1, 1, 0, 1, 1, 1, 0],
                  [0, 1, 1, 1, 0, 1, 1, 1, 0],
                  [0, 1, 1, 1, 1, 1, 1, 1, 0],
                  [0, 1, 1, 1, 1, 1, 1, 1, 0],
                  [0, 0, 0, 0, 0, 0, 0, 0, 0],
                ],
                nodeA: { pos: { x: 2, y: 2 }, style: { color: "#2a9d8f" } },
                nodeB: {
                  pos: { x: 6, y: 3 },
                  style: { color: "#e76f51", shape: "circle" },
                },
                run() {
                  this.nodeA.onPosChange = (node, pos) => {
                    this.nodeA.pos.x = node.pos.x;
                    this.nodeA.pos.y = node.pos.y;
                  };
                  this.nodeB.onPosChange = (node, pos) => {
                    this.nodeB.pos.x = node.pos.x;
                    this.nodeB.pos.y = node.pos.y;
                  };

                  const PFX = new PathfindingFX(
                    document.getElementById("adding_nodes"),
                    this.map
                  )
                    .drawMap()
                    .addNode(this.nodeA)
                    .addNode(this.nodeB)
                    .render();
                },
                init() {
                  this.run();
                },
              });
            </script>
          </div>
        </div>
        <div class="text-center lg:text-left lg:pl-4">
          <a
            onclick="this.nextElementSibling.classList.toggle('hidden')"
            class="text-white bg-teal-900 px-3 py-2 rounded-lg cursor-pointer whitespace-nowrap lg:hidden"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-5 h-5 inline"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 16.5"
              />
            </svg>
            Toggle code
          </a>

          <div class="hidden lg:block text-left">
            <pre
              class="bg-gray-100 p-2 rounded"
            ><code class="text-xs text-gray-800">const PFX = new PathfindingFX([...]);

const nodeA = <span x-html="JSON.stringify(nodeA, null, 4)"></span>;
const nodeB = <span x-html="JSON.stringify(nodeB, null, 4)"></span>;

PFX.addNode(nodeA);
PFX.addNode(nodeB);</code></pre>
          </div>
        </div>
      </div>

      <!-- PFX :: finding_the_path -->
      <div
        class="grid grid-cols-1 lg:grid-cols-3 lg:divide-x-2 gap-4 p-4 py-8"
        x-data="finding_the_path()"
      >
        <div class="lg:w-[300px] justify-center flex flex-col gap-4">
          <h1 class="text-xl font-serif">PFX :: Finding the path</h1>
          <p class="text-justify">
            Every added node can have its path calculated by giving it a
            <i>"to"</i> property containing the <i>"pos"</i> to which x/y point
            the path should be found.
          </p>
          <p class="text-justify">
            Like a node itself, the <i>"to"</i> property can have more settings
            like, again, a style property.
          </p>
          <div class="text-center">
            <input type="checkbox" x-model="toStyle" />
            <span class="font-mono text-xs">Toggle style property</span>
          </div>
        </div>
        <div class="flex items-center justify-center">
          <div>
            <div id="finding_the_path" style="max-width: 225px"></div>
            <script>
              const finding_the_path = () => ({
                pfx: null,
                map: [
                  [0, 0, 0, 0, 0, 0, 0, 0, 0],
                  [0, 1, 1, 1, 0, 1, 1, 1, 0],
                  [0, 1, 1, 1, 0, 1, 1, 1, 0],
                  [0, 1, 1, 1, 0, 1, 1, 1, 0],
                  [0, 1, 1, 1, 0, 1, 1, 1, 0],
                  [0, 1, 1, 1, 0, 1, 1, 1, 0],
                  [0, 1, 1, 1, 1, 1, 1, 1, 0],
                  [0, 1, 1, 1, 1, 1, 1, 1, 0],
                  [0, 0, 0, 0, 0, 0, 0, 0, 0],
                ],
                node: {
                  pos: { x: 2, y: 2 },
                  style: { color: "#ff9f1c" },
                  to: { pos: { x: 6, y: 3 } },
                },
                toStyle: false,
                run() {
                  this.node.to.onPosChange = (node, pos) => {
                    this.node.to.pos.x = node.pos.x;
                    this.node.to.pos.y = node.pos.y;
                  };

                  this.pfx = new PathfindingFX(
                    document.getElementById("finding_the_path"),
                    this.map

                  )
                    .drawMap()
                    .addNode(this.node);
                },
                init() {
                  this.run();
                  this.$watch("toStyle", (value) => {
                    if (value) {
                      this.node.to.style = {
                        color: "#ffbf69",
                        shape: "circle",
                        size: { w: 0.5, h: 0.5 },
                      };
                      this.pfx.nodesList[0].to.style = this.node.to.style;
                    } else {
                      delete this.node.to.style;
                      this.pfx.nodesList[0].to.style = this.node.to.style;
                    }
                    this.pfx.render();
                  });
                },
              });
            </script>
          </div>
        </div>
        <div class="text-center lg:text-left lg:pl-4">
          <a
            onclick="this.nextElementSibling.classList.toggle('hidden')"
            class="text-white bg-teal-900 px-3 py-2 rounded-lg cursor-pointer whitespace-nowrap lg:hidden"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-5 h-5 inline"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 16.5"
              />
            </svg>
            Toggle code
          </a>

          <div class="hidden lg:block text-left">
            <pre
              class="bg-gray-100 p-2 rounded"
            ><code class="text-xs text-gray-800">const PFX = new PathfindingFX([...]);

const node = {[...],
  to: <span x-html="JSON.stringify(node.to, null, 4)"></span>
};

PFX.addNode(node);</code></pre>
          </div>
        </div>
      </div>

      <!-- PFX :: auto_play -->
      <div
        class="grid grid-cols-1 lg:grid-cols-3 lg:divide-x-2 gap-4 p-4 py-8"
        x-data="auto_play()"
      >
        <div class="lg:w-[300px] justify-center flex flex-col gap-4">
          <h1 class="text-xl font-serif">PFX :: Auto Play</h1>
          <p class="text-justify">
            Give a node a <i>"to"</i> and <i>"speed"</i> property and call the
            <i>"play()"</i> method on the PFX object to start the auto play.
          </p>
          <p class="text-justify">
            Try dragging around the node, its goal or just hit the button below.
          </p>

          <div class="text-center">
            <button
              @click="pfx.nodesList[0].to.pos = pfx.nodesList[0].positions()[Math.floor(Math.random() * pfx.nodesList[0].positions().length)].pos"
              class="bg-teal-900 text-white px-3 py-2 text-xs font-mono rounded-lg"
            >
              New <i>"to"</i> position
            </button>
          </div>
        </div>
        <div class="flex items-center justify-center">
          <div>
            <div id="auto_play" style="max-width: 225px"></div>
            <script>
              const auto_play = () => ({
                pfx: null,
                map: [
                  [0, 0, 0, 0, 0, 0, 0, 0, 0],
                  [0, 1, 1, 1, 0, 1, 1, 1, 0],
                  [0, 1, 1, 1, 0, 1, 1, 1, 0],
                  [0, 1, 1, 1, 0, 1, 1, 1, 0],
                  [0, 1, 1, 1, 0, 1, 1, 1, 0],
                  [0, 1, 1, 1, 0, 1, 1, 1, 0],
                  [0, 1, 1, 1, 1, 1, 1, 1, 0],
                  [0, 1, 1, 1, 1, 1, 1, 1, 0],
                  [0, 0, 0, 0, 0, 0, 0, 0, 0],
                ],
                node: {
                  speed: 100,
                  pos: { x: 2, y: 2 },
                  style: { color: "#7B2869" },
                  to: {
                    pos: { x: 6, y: 3 },
                    style: {
                      shape: "circle",
                      size: { w: 0.5, h: 0.5 },
                      color: "#7B2869",
                    },
                  },
                },
                run() {
                  this.pfx = new PathfindingFX(
                    document.getElementById("auto_play"),
                    this.map
                  )
                    .drawMap()
                    .addNode(this.node)
                    .play();
                },
                init() {
                  this.run();
                },
              });
            </script>
          </div>
        </div>
        <div class="text-center lg:text-left lg:pl-4">
          <a
            onclick="this.nextElementSibling.classList.toggle('hidden')"
            class="text-white bg-teal-900 px-3 py-2 rounded-lg cursor-pointer whitespace-nowrap lg:hidden"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-5 h-5 inline"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 16.5"
              />
            </svg>
            Toggle code
          </a>

          <div class="hidden lg:block text-left">
            <pre
              class="bg-gray-100 p-2 rounded"
            ><code class="text-xs text-gray-800">const PFX = new PathfindingFX([...]);

const node = {[...],
  to: [...],
  speed: 100,
};

PFX.addNode(node);
PFX.play();</code></pre>
          </div>
        </div>
      </div>

      <!-- PFX :: positions -->
      <div
        class="grid grid-cols-1 lg:grid-cols-3 lg:divide-x-2 gap-4 p-4 py-8"
        x-data="positions()"
      >
        <div class="lg:w-[300px] justify-center flex flex-col gap-4">
          <h1 class="text-xl font-serif">PFX :: Positions</h1>
          <p class="text-justify">
            Every nodes <i>"positions()"</i> method returns an array of
            accessible positions for that node. These positions contain
            different values about how far that position is away.
          </p>
          <p class="text-justify">
            With the help of callbacks like <i>onRender</i> we can modify the
            drawn canvas by creative ways.
          </p>
          <div class="text-center lg:text-left">
            <div class="flex gap-4 items-center justify-center">
              <div class="flex-grow max-w-[250px]">
                <input
                  id="default-range"
                  type="range"
                  x-model="step"
                  min="0"
                  :max="sliderValueMax"
                  class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                />
              </div>
              <div class="flex-none">
                <span class="font-mono text-xs">Toggle distance</span>
              </div>
            </div>
          </div>
        </div>
        <div class="flex items-center justify-center">
          <div>
            <div id="positions" style="max-width: 225px"></div>
            <script>
              const positions = () => ({
                map: [
                  [0, 0, 0, 0, 0, 0, 0, 0, 0],
                  [0, 1, 1, 1, 0, 1, 1, 1, 0],
                  [0, 1, 1, 1, 0, 1, 1, 1, 0],
                  [0, 1, 1, 1, 0, 1, 1, 1, 0],
                  [0, 1, 1, 1, 0, 1, 1, 1, 0],
                  [0, 1, 1, 1, 0, 1, 1, 1, 0],
                  [0, 1, 1, 1, 1, 1, 1, 1, 0],
                  [0, 1, 1, 1, 1, 1, 1, 1, 0],
                  [0, 0, 0, 0, 0, 0, 0, 0, 0],
                ],
                step: null,
                sliderValueMax: null,
                node: {
                  pos: { x: 2, y: 3 },
                  style: { color: "#579BB1" },
                  onRender: (node) => {
                    const aP = node.positions();
                    node._alpine.sliderValueMax = Math.ceil(
                      Math.max(...aP.map((n) => n.g))
                    );
                    if (node._alpine.step === null)
                      node._alpine.step = Math.round(
                        node._alpine.sliderValueMax / 2
                      );

                    node
                      .positions()
                      .filter((n) => n.g <= node._alpine.step)
                      .map((n) => {
                        node.pfx.drawNode({
                          ...n,
                          ...{ style: { color: "#E1D7C6" } },
                        });
                      });
                  },
                },

                run() {
                  this.node._alpine = this;

                  this.pfx = new PathfindingFX(
                    document.getElementById("positions"),
                    this.map
                  );

                  this.pfx.addNode(this.node);
                },
                init() {
                  this.run();
                  this.$watch("step", (value) => this.pfx.render());
                },
              });
            </script>
          </div>
        </div>
        <div class="text-center lg:text-left lg:pl-4">
          <a
            onclick="this.nextElementSibling.classList.toggle('hidden')"
            class="text-white bg-teal-900 px-3 py-2 rounded-lg cursor-pointer whitespace-nowrap lg:hidden"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-5 h-5 inline"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 16.5"
              />
            </svg>
            Toggle code
          </a>

          <div class="hidden lg:block text-left">
            <pre
              class="bg-gray-100 p-2 rounded"
            ><code class="text-xs text-gray-800">const PFX = new PathfindingFX([...]);

const node = {[...],
  onRender: (node) => {
    node
      .positions()
      .filter((n) => n.g <= <span x-html="step"></span>)
      .map((n) => {
        PFX.drawNode({
          pos: n.pos
          style: { color: "#E1D7C6" },
        });
      });
  },
};

PFX.addNode(node);</code></pre>
          </div>
        </div>
      </div>

      <!-- PFX :: Weighted Map -->
      <div
        class="grid grid-cols-1 lg:grid-cols-3 lg:divide-x-2 gap-4 p-4 py-8"
        x-data="weighted()"
      >
        <div class="lg:w-[300px] justify-center flex flex-col gap-4">
          <h1 class="text-xl font-serif">PFX :: Map weights</h1>
          <p class="text-justify">
            You can also use other map values than 0 and 1. By using higher
            values you give each position a weight which will be considered by
            the calculation.
          </p>
          <p class="text-justify">
            The algorithm always wants to find the way with the lowest weight in
            total. You can modify the values in this example.
          </p>
        </div>
        <div class="flex items-center justify-center">
          <div>
            <div id="weighted" style="max-width: 225px"></div>
            <script>
              const weighted = () => ({
                map: [
                  [0, 0, 0, 0, 0, 0, 0, 0, 0],
                  [0, 1, 1, 1, 1, 2, 3, 4, 0],
                  [0, 1, 1, 1, 2, 3, 3, 3, 0],
                  [0, 1, 1, 1, 2, 3, 3, 2, 0],
                  [0, 1, 1, 3, 4, 4, 2, 1, 0],
                  [0, 1, 2, 3, 4, 2, 1, 1, 0],
                  [0, 1, 2, 2, 3, 2, 1, 1, 0],
                  [0, 1, 1, 1, 2, 1, 1, 1, 0],
                  [0, 0, 0, 0, 0, 0, 0, 0, 0],
                ],
                fromNode: {
                  pos: { x: 2, y: 2 },
                  style: { color: "purple" },
                  allowDiagonal: false,
                },
                toNode: { pos: { x: 6, y: 5 } },
                run() {
                  const PFX = new PathfindingFX(
                    document.getElementById("weighted"),
                    this.map,
                    {
                      wallNodeColor: "#242424",
                      onInteractionWithAFreeNode: (node, pos, pfx) => {
                        if (pfx.free(pos)) {
                          pfx.map[pos.y][pos.x]++;
                          if (pfx.map[pos.y][pos.x] == 6)
                            pfx.map[pos.y][pos.x] = 0;
                          pfx.updateMap(pfx.map);
                        }
                      },
                    }
                  );
                  PFX.addNode({ ...this.fromNode, ...{ to: this.toNode } });
                },
                init() {
                  this.run();
                },
              });
            </script>
          </div>
        </div>
        <div class="text-center lg:text-left lg:pl-4">
          <a
            onclick="this.nextElementSibling.classList.toggle('hidden')"
            class="text-white bg-teal-900 px-3 py-2 rounded-lg cursor-pointer whitespace-nowrap lg:hidden"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-5 h-5 inline"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 16.5"
              />
            </svg>
            Toggle code
          </a>

          <div class="hidden lg:block text-left">
            <pre
              class="bg-gray-100 p-2 rounded"
            ><code class="text-xs text-gray-800">const PFX = new PathfindingFX([...], 
  [
    <span x-html='"["+map.join("],\n    [")+"]"'></span>
  ]
);

PFX.addNode({
  [...],
  allowDiagonal: false
});</code></pre>
          </div>
        </div>
      </div>

      <div class="p-4 container mx-auto py-8">
        <h1 class="text-xl font-serif">PFX :: More options with defaults</h1>
        <h2 class="font-serif py-2">Pathfinding Parameters</h2>
        <pre
          class="bg-gray-100 p-2 rounded overflow-x-scroll"
        ><code class="text-xs text-gray-800"><span class="text-gray-400">const PFX = new PathfindingFX(element,map,</span>
  {
    <span class="text-gray-600">// Algorithm</span>
    heuristics:                 <span class="text-[#690]">"manhattan"</span>,     <span class="text-gray-600">// used heuristics, can be "manhattan" or "euclidean"</span>
    allowDiagonal:              <span class="text-[#905]">true</span>,            <span class="text-gray-600">// globally set if diagonal movement is allowed</span>

    <span class="text-gray-600">// Colors</span>
    wallNodeColor:              <span class="text-[#690]">"#dbdbdb"</span>,       <span class="text-gray-600">// color of nodes with value "0" (walls)</span>
    emptyNodeColor:             <span class="text-[#690]">"#f8f8f8"</span>,       <span class="text-gray-600">// color of nodes with value "1" (walkable)</span>
    pathNodeColor:              <span class="text-[#690]">"#a8a8a8"</span>,       <span class="text-gray-600">// color of paths that aren't colored otherwise</span>
    highlightEdges:             <span class="text-[#905]">true</span>,            <span class="text-gray-600">// if walls should have edges</span>
    wallEdgeColor:              <span class="text-[#690]">"#a8a8a8"</span>,       <span class="text-gray-600">// if above is true, this color is used</span>
    weightNodeColors:           {                <span class="text-gray-600">// in case of weighted map, these colors are used for different weights</span>
                                  <span class="text-[#905]">5</span>: { color: <span class="text-[#690]">"#6c584c"</span> },
                                  <span class="text-[#905]">4</span>: { color: <span class="text-[#690]">"#a98467"</span> },
                                  <span class="text-[#905]">3</span>: { color: <span class="text-[#690]">"#adc178"</span> },
                                  <span class="text-[#905]">2</span>: { color: <span class="text-[#690]">"#dde5b6"</span> },
                                  <span class="text-[#905]">1</span>: { color: <span class="text-[#690]">"#f0ead2"</span> },
                                  <span class="text-[#905]">0</span>: { color: <span class="text-[#690]">"#0088bb"</span>, edgeColor: <span class="text-[#690]">"#c2b280"</span> },
                                }        

    <span class="text-gray-600">// Interactivity</span>
    interactive:                <span class="text-[#905]">true</span>,            <span class="text-gray-600">// defines if the map is interactive with cursor or touch events</span>
                        
    <span class="text-gray-600">// Callbacks</span>   
    onUpdateMap:                <span class="text-[#07a]">function(<span class="text-[#000]">newMap</span>)</span>,                    <span class="text-gray-600">// callback function when the map updates</span>
    onInteractionWithAFreeNode: <span class="text-[#07a]">function(<span class="text-[#000]">node</span>,<span class="text-[#000]">pos</span>,<span class="text-[#000]">pfx_instance</span>)</span>,     <span class="text-gray-600">// callback function when interacting with free nodes</span>
    onInteractionWithAWallNode: <span class="text-[#07a]">function(<span class="text-[#000]">node</span>,<span class="text-[#000]">pos</span>,<span class="text-[#000]">pfx_instance</span>)</span>,     <span class="text-gray-600">// callback function when interacting with wall nodes</span>
  }
<span class="text-gray-400">)</span></code></pre>
        <h2 class="font-serif py-2">Node Parameters</h2>
        <pre
          class="bg-gray-100 p-2 rounded overflow-x-scroll"
        ><code class="text-xs text-gray-800"><span class="text-gray-400">PFX.addNode(</span>
  {
    <span class="text-gray-600">// Algorithm</span>
    pos: {                     <span class="text-gray-600">// initial x and y position (0,0 is in the top left corner)</span>
      x:            <span class="text-[#905]">0</span>,
      y:            <span class="text-[#905]">0</span>
    },
    to: {
      pos: {                   <span class="text-gray-600">// position to which the path gets calculated and rendered</span>
        x:          <span class="text-[#905]">0</span>,
        y:          <span class="text-[#905]">0</span>
      },
      style:        <span class="text-[#000] italic">[See below, same as node styling]</span>
    },
    allowDiagonal:  <span class="text-[#905]">true</span>,      <span class="text-gray-600">// allows diagonal movement (this overrides global settings)</span>
    
    <span class="text-gray-600">// Colors</span>
    style: {
      color:        <span class="text-[#690]">"#000000"</span>, <span class="text-gray-600">// color of the node</span>
      shape:        <span class="text-[#690]">"rect"</span>,    <span class="text-gray-600">// shape of the node ("rect", "circle" "roundRect")</span>
      mode:         <span class="text-[#690]">"fill"</span>,    <span class="text-gray-600">// drawing mode of the node ("fill", "stroke")</span>
      size: {
        w:          <span class="text-[#905]">1</span>          <span class="text-gray-600">// width of the node, factored to the tile size. (1 equals 100% of the given tiles space)</span>
        h:          <span class="text-[#905]">1</span>          <span class="text-gray-600">// height of the node, factored to the tile size. (1 equals 100% of the given tiles space)</span>
      }
    },

    <span class="text-gray-600">// Interactivity</span>
    interactive:    <span class="text-[#905]">true</span>,      <span class="text-gray-600">// defines if a node is interactive with cursor or touch events</span>

    <span class="text-gray-600">// Animation</span>
    speed:          <span class="text-[#905]">100</span>,       <span class="text-gray-600">// when using PFX.play() this number defines how quickly the node follows its path</span>
    
    <span class="text-gray-600">// Callbacks</span>   
    onAdd:          <span class="text-[#07a]">function(<span class="text-[#000]">node</span>)</span>,        <span class="text-gray-600">// callback function when a node gets added</span>
    onRender:       <span class="text-[#07a]">function(<span class="text-[#000]">node</span>)</span>,        <span class="text-gray-600">// callback function when a node gets rendered in the global render function</span>
    onUpdate:       <span class="text-[#07a]">function(<span class="text-[#000]">node</span>,<span class="text-[#000]">delta</span>)</span>,  <span class="text-gray-600">// callback function when a nodes gets updated in the global animation update function</span>
    onPosChange:    <span class="text-[#07a]">function(<span class="text-[#000]">node</span>,<span class="text-[#000]">pos</span>)</span>,    <span class="text-gray-600">// callback function when a nodes position changes</span>
    onPathEnd:      <span class="text-[#07a]">function(<span class="text-[#000]">node</span>)</span>,        <span class="text-gray-600">// callback function when the node reaches its goal</span>
    onNoPath:       <span class="text-[#07a]">function(<span class="text-[#000]">node</span>)</span>,        <span class="text-gray-600">// callback function a node has no path</span>
  }
<span class="text-gray-400">)</span></code></pre>
        <h2 class="font-serif py-2">Animation & miscellaneous</h2>
        <pre
          class="bg-gray-100 p-2 rounded overflow-x-scroll"
        ><code class="text-xs text-gray-800"><span class="text-gray-600">// Animation</span>
PFX.<span class="text-[#DD4A68]">play()</span>            <span class="text-gray-600">// enables animation and will automatically update nodes positions</span>
PFX.<span class="text-[#DD4A68]">stop()</span>            <span class="text-gray-600">// disables animation</span>

<span class="text-gray-600">// Miscellaneous</span>
PFX.<span class="text-[#DD4A68]">reset()</span>           <span class="text-gray-600">// resets everything and removes the canvas from the DOM </span>

</code></pre>
      </div>
    </div>

    <div class="text-center mt-5 bg-teal-900">
      <div class="container mx-auto p-8 text-white">
        Made with
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="w-6 h-6 inline motion-safe:animate-bounce"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"
          />
        </svg>
        by
        <a href="https://marcoplain.com" target="_blank" class="text-teal-500">
          Marco Plain
        </a>
        <p class="text-sm text-gray-300">
          Designed with
          <a
            href="https://tailwindcss.com/"
            target="_blank"
            class="text-teal-500"
            >TailwindCSS</a
          >
          <br />
          Interactions realized with
          <a href="https://alpinejs.dev/" target="_blank" class="text-teal-500"
            >Alpine</a
          >
        </p>
      </div>
    </div>

    <script src="pathfinding-fx.js"></script>
    <script src="examples.js"></script>
  </body>
</html>
